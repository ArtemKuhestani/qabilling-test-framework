package qa.utils;

import net.datafaker.Faker;
import qa.config.Config;

/**
 * Утилитный класс для генерации уникальных номеров телефонов (MSISDN).
 * 
 * Используется в тестах для создания профилей с уникальными номерами,
 * чтобы избежать конфликтов и ошибок "номер уже существует".
 * 
 * MSISDN расшифровывается как Mobile Station International Subscriber Directory Number -
 * это международный формат номера мобильного телефона.
 * 
 * Для Кыргызстана формат: 99680XXXXXXX (12 цифр)
 * - 996: код страны (Кыргызстан)
 * - 80: код одного из операторов
 * - XXXXXXX: 7 случайных цифр номера абонента
 */
public class MsisdnGenerator {

    /**
     * Экземпляр Faker для генерации случайных данных.
     * 
     * static final означает:
     * - static: один экземпляр на весь класс (не создается при каждом вызове метода)
     * - final: после инициализации значение нельзя изменить
     * 
     * Faker - библиотека для генерации реалистичных тестовых данных:
     * имен, адресов, телефонов, email и т.д.
     */
    private static final Faker faker = new Faker();

    /**
     * Генерирует уникальный MSISDN для использования в тестах.
     * 
     * Принцип работы:
     * 1. Генерируется 7 случайных цифр через Faker
     * 2. Добавляется префикс "99680" из Config
     * 3. Получается полный номер формата "996801234567"
     * 
     * @return строка с уникальным номером телефона (12 символов)
     * 
     * Пример вызова:
     * String msisdn = MsisdnGenerator.generateUniqueMsisdn();
     * // msisdn = "996803456789"
     * 
     * Примечание: Уникальность достигается за счет случайности.
     * Вероятность совпадения двух сгенерированных номеров крайне мала
     * (1 из 10 миллионов возможных комбинаций).
     * 
     * Для 100% уникальности в продакшене обычно используют:
     * - Проверку существования в БД
     * - Последовательные номера с инкрементом
     * - UUID в качестве идентификатора
     * Но для тестов случайная генерация более чем достаточна.
     */
    public static String generateUniqueMsisdn() {
        String randomPart = faker.number().digits(7);
        return Config.PHONE_PREFIX + randomPart;
    }
}
